"use strict";(()=>{var e={};e.id=204,e.ids=[204],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},4577:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},603:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>q,originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>x,routeModule:()=>d,serverHooks:()=>j,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>h});var o={};t.r(o),t.d(o,{GET:()=>p,POST:()=>l});var s=t(5489),n=t(8285),a=t(2377),i=t(9001),u=t(1985),c=t(1225);async function p(e){try{let r=(0,i.createRouteHandlerClient)({cookies:u.cookies}),{searchParams:t}=new URL(e.url),o=parseInt(t.get("page")||"1"),s=parseInt(t.get("limit")||"10"),n=t.get("search")||"",a=t.get("jobType"),p=t.get("experienceLevel"),l=(o-1)*s,d=r.from("jobs").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(l,l+s-1);n&&(d=d.or(`title.ilike.%${n}%,description.ilike.%${n}%`)),a&&(d=d.eq("job_type",a)),p&&(d=d.eq("experience_level",p));let{data:x,count:g,error:j}=await d;if(j)return console.error("Error fetching jobs:",j),new c.Z("Error fetching jobs",{status:500});return c.Z.json({jobs:x,total:g||0,page:o,limit:s,totalPages:Math.ceil((g||0)/s)})}catch(e){return console.error("Error:",e),new c.Z("Internal Server Error",{status:500})}}async function l(e){try{let r=(0,i.createRouteHandlerClient)({cookies:u.cookies}),{data:{session:t}}=await r.auth.getSession();if(!t)return new c.Z("Unauthorized",{status:401});let{title:o,company:s,location:n,description:a,requirements:p,salary_min:l,salary_max:d,job_type:x,experience_level:g}=await e.json();if(!o||!s||!n||!a||!p||!x||!g)return new c.Z("Missing required fields",{status:400});let{data:j,error:q}=await r.from("jobs").insert({title:o,company:s,location:n,description:a,requirements:p,salary_min:l,salary_max:d,job_type:x,experience_level:g,posted_by:t.user.id}).select().single();if(q)return console.error("Error creating job:",q),new c.Z("Error creating job",{status:500});return c.Z.json(j)}catch(e){return console.error("Error:",e),new c.Z("Internal Server Error",{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/jobs/route",pathname:"/api/jobs",filename:"route",bundlePath:"app/api/jobs/route"},resolvedPagePath:"/Users/refactortalent/TalentprimerAPP/career-path-pilot-app/apps/web/app/api/jobs/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:x,staticGenerationAsyncStorage:g,serverHooks:j,headerHooks:q,staticGenerationBailout:h}=d,b="/api/jobs/route";function f(){return(0,a.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[705,281,602],()=>t(603));module.exports=o})();